2026-01-15 Update Log (Fix Cloud Sea Market):
- [Fix] Market Purchase Crash: Resolved `TypeError: Cannot read properties of undefined` in `buyMarketItem` when purchasing non-resource items (e.g., Sect High Golden Pill).
- [Fix] Robustness: Added checks to ensure resource exists before attempting to unlock or modify it in `SectManager.js`.
- [Fix] UI Refresh: Fixed an issue where resources and UI were not immediately updated after purchasing items in Cloud Sea Market.

2026-01-15 Update Log (Release V0.28):
- [Release] Updated game version to V0.28.
- [Release] Added multilingual release notes for all recent changes.
- [UX] Layout: Redesigned "Game Help" panel layout to a 2-column grid.
- [UX] Help Content: Added detailed "Sect System" section (Sect Tasks, Cloud Market, Heavenly Events).
- [UX] Localization: Added multilingual support (ZH/EN/JP) for Sect Panel tabs ("Sect Tasks", "Heavenly Events", "No Events").
- [UX] Localization: Added multilingual support for floating text VFX (Level Up, Breakthrough, Sect Events).
- [UX] Localization: Added multilingual support (ZH/EN/JP) for Sect System help content.
- [UX] Icons: Added emoji icons to all Help sections and main navigation tabs.
- [UX] Debug Tab: Hidden by default. Added secret toggle by clicking "Developer Contact: ..." 3 times in Help Panel.

2026-01-14 Update Log (Pixi Fixes & Tests):
- [Fix] PixiApp Error: Resolved `TypeError: Cannot read properties of undefined` in `removeButtonEffect` by adding robustness checks.
- [Fix] Pixi v8 Text Crash: Removed unsupported array syntax for `fill` in `TextStyle` (used solid color instead) to prevent `_normalize` error.
- [Fix] Pixi Animation Error: Fixed `Assignment to constant variable` in `playCenterTextEffect` (changed `const t` to `let t` for easing calculation).
- [Fix] Button Effect Init: Ensured `updatePlayerInfo` runs after Pixi initialization to correctly apply start-up effects.
- [Test] Core Test Suite: Integrated Pixi.js environment into `core-test.html` and added manual triggers for all visual effects (Level Up, Breakdown, etc.).

2026-01-14 Update Log (Fix Tribulation Rate Reset):
- [Fix] Tribulation Success Rate: Reset consumed tribulation pills (e.g., foundation_pill) upon successful rank upgrade.
- [Code] PlayerManager.js: Added logic to clear 'tribulationSuccess' pills in upgrade() on success.
- [Test] core-test.html: Added 'testTribulationReset' to verify success rate reset.

2026-01-12 Update Log (v0.29):

[UX] Realm Upgrade Button Feedback Improvement
- Removed tooltip (title) from Ascend and Level Up buttons to fix delayed state detection issue.
- Button click now displays immediate SYSTEM-level LOG feedback when upgrade is not possible.
- Failure messages shown in orange (#ff9800) color for visibility.
- Files changed: MainView.js, zh-TW.json, en.json

[Fix] Sect Event Attempt Refresh
- Fixed issue where "Heavenly Mystery Event" remaining attempts did not update immediately after submission.
- Changed to call renderEvents() after submission to ensure UI reflects current state.
- Files changed: SectPanel.js

[UI] Cloud Sea Market Item Descriptions
- Added direct display of item descriptions in the Cloud Sea Market (next to/below names).
- Added description translations for market items (foundation_pill, spirit_grass_100y, etc.).
- Files changed: SectPanel.js, zh-TW.json, en.json

2026-01-14 Update Log (Pixi.js Effects):
- [Effect] Level Up: Green particles from button position.
- [Effect] Breakthrough Success: Full-screen golden burst with rings.
- [Effect] Breakthrough Failed: Full-screen red shards falling with red flash.
- [Effect] Reincarnation: Full-screen purple-gold vortex with final light burst.
- Files changed: PixiApp.js, PlayerManager.js

---

2026-01-13 Update Log (Pixi.js Integration):
- [Architecture] Added hybrid HTML + Pixi.js rendering architecture.
- [New] Created `src/renderers/IRenderer.js` - renderer abstraction interface.
- [New] Created `src/views/pixi/PixiApp.js` - Pixi.js application with floating text and particle effects.
- [System] Added Pixi.js v8 CDN to `index.html`.
- [System] Integrated PixiApp into `main.js`.
- API: `window.game.pixiApp.playResourceGainEffect(resId, amount, x, y)`
- API: `window.game.pixiApp.playUpgradeEffect('levelUp' | 'breakthrough' | 'tribulation')`

---

2026-01-13 Update Log (v0.272):
- [Feature] Heavenly Mystery Event notification [å¤©] added.
- [Balance] Nascent Soul Incubation: Changed to +10% Basic Res Cap (x1.10).
- [System] Updated ReleaseNotes to v0.272.

---

- [UX] Realm Upgrade Feedback: Removed Tooltip, added immediate SYSTEM log feedback.
- [Fix] Sect Event UI: Fixed Heavenly Mystery Event attempts delay refresh.
- [UI] Cloud Sea Market: Added direct item descriptions in market list.
- [System] Updated ReleaseNotes to v0.271.

---

2026-01-12 Update Log:

[Fix] Sect Task Claim Button Issue
- Fixed bug where sect task buttons remained disabled (greyed out with "?" tooltip) after claiming reward.
- Root cause: After claiming, only update() was called, which does not re-render the task list when it has content.
- Solution: Changed to call renderTasks() after successful claim, which rebuilds the task cards with correct button states.

2026-01-11 Update Log (v0.28 Planning):

[Next]
- ...

[Fix] Sect Task Refresh UI
- Fixed an issue where the Sect Task list would not visually update immediately after manual refresh or accepting a task.
- The task list now properly re-renders instantly without needing to switch tabs.

2026-01-11 Update Log (Hotfix):

[Balance] Era 3 resource availability adjustments
- Significantly increased 'spirit_grass_100y' rewards in Era 3 Sect Tasks based on user feedback.
  - Rare Task: Increased from 1-2 to 40-60.
  - Epic Task: Increased from 3-5 to 80-120.
  - Reason: To match the consumption needs for Alchemy and compensate for the lack of passive production buildings in this Era.

2026-01-11 Update Log:

[Feature] Cloud Sea Market Improvements
- Implemented item purchase logging with cost visibility in SectManager.
- Added localization for market exchange logs.
- Added batch production/exchange support (e.g., x50 for basic items) to reduce click fatigue.
- Implemented purchase limits (daily/periodic) for event items to maintain balance.
- Updated SectPanel UI to show requested item quantity (x1, x50) and remaining purchase limit.

[Balance] Era 3 resource availability
- Added 'spirit_grass_100y' (Century Spirit Grass) to rare and epic Sect Task reward pools in Era 3.
- Lowered 'spirit_grass_100y' market availability requirement from Era 4 to Era 3 to enable Golden Core Pill crafting.

[Fix] Core Test
- Fixed LanguageManager initialization in core-test environment to ensure localized logs are correctly verified.
